1) SGA: System Global Area


2) Основные пулы памяти SGA и их назначение

- shared pool: кэшируемые планы выполнения, словарь данных, константы курсоров; ускоряет повторные запросы.

- buffer cache (блок-кэш инстанса): кэш данных и индексов, чтение/записи в БД уменьшают дисковые обращения.

- large pool: резерв для долгих операций (RMAN, sessãoов GUI, I/O с большим объёмом), уменьшает конкуренцию за память в shared pool.

- java pool: память под JVM/приложения Java в Oracle.

- streams pool: память для Oracle Streams (если используется).

- dictionary/cache/keep pool (часть общего "keep pool"): небольшие службы словаря и структур.

- KEEP: кэширование объектов для важных запросов (часть shared pool).

- RECYCLE: упрощённое кэширование для часто переиспользуемых небольших объектов.


3) Pараметры SGA_MAX_SIZE и SGA_TARGET

- SGA_MAX_SIZE: максимальный размер SGA после перезагрузки; верхняя граница.

- SGA_TARGET: динамически управляемый целевой размер SGA. При AMM/Auto Memory Management он управляется автоматически; 
если установлен, SGA_TARGET задаёт ориентир для общего размера SGA.

4) Назначение буферного кэша инстанса

- хранение часто читаемых данных и индексов для ускорения операций ввода-вывода; снижает число физических чтений.



5) Пулы KEEP, DEFAULT и RECYCLE в буферном кэше

- KEEP: части кэша, которые не могут быть вытеснены до использования другими сессиями; требуют сохранения данных.

- DEFAULT: основной пул буфера для обычной работы; стандартная замена по LRU.

- RECYCLE: Shelton-режим для объектов, которые не должны конкурировать за обычный кеш; быстрее высвобождают память, но могут привести к повторному чтению.



6) Принцип вытеснения в буферном кэше (LRU)

- когда память заполнена, Oracle вытесняет менее активно используемые блоки по принципу наименее недавно используемого (LRU) до освобождения места для новых чтений/записей.


7) Принцип вытеснения блоков таблицы, созданной CREATE TABLE … CACHE

- если таблица помечена CACHE, её блоки могут храниться в кэше как предпочтительные; вытеснение происходит по тем же правилам LRU, 
но эти блоки считаются более вероятными к повторному чтению и сохраняются дольше, чтобы ускорить доступ к часто используемым строкам.



8) Как изменить размеры пулов

- через ALTER SYSTEM или ALTER SESSION, динамически где поддерживается:

  - ALTER SYSTEM SET buffer_pool_keep = <размер> SCOPE=BOTH;

  - ALTER SYSTEM SET db_keep_cache_size = <размер> SCOPE=BOTH;

  - ALTER SYSTEM SET sga_target = <размер> SCOPE=BOTH; (при поддержке ACMS)

- для конкретных пулов в современных версиях используйте параметры MEMORY_TARGET/MEMORY_MAX_TARGET или отдельные параметры для пулов
 (например, DB_CACHE_SIZE, JAVA_POOL_SIZE, SHARED_POOL_SIZE) с SCOPE=SPFILE/BOTH и рестартом.



9) Какие пулы допускают изменение размеров

- В большинстве современных версий Oracle позволяют изменять SHARED_POOL_SIZE, JAVA_POOL_SIZE, LARGE_POOL_SIZE и KEEP/RECYCLE/DEFAULT через SGA и автодинамически 
в рамках SGA_TARGET/SGA_DYNAMIC_COMPONENTS; но точная поддержка зависит от версии и конфигурации (AMM/ASMM).



10) Назначение процесса LISTENER

- слушатель (LISTENER) принимает соединения клиентов и маршрутизирует их к экземплярам БД; обеспечивает сетевой доступ к базам данных.



11) Назначение утилиты lsnrctl

- управляющая утилита для LISTENER: настройка, запуск/остановка LISTENER, просмотр статусов, изменения конфигурации (LISTENER.ora), просмотр журналов.



12) Что такое сервис

- логический набор единиц работы БД; предоставляет единый адрес клиентам и назначение ресурсов/соединений; может включать один или несколько экземпляров RAC.



13) Какие сервисы создаются автоматически при инсталляции инстанса

- в обычной конфигурации создаются сервисы по имени базы данных и, в RAC/Data Guard, дополнительные сервисы резервирования, содержащие экземпляры кластера; 
например, ORCL и ORCL_DGMGRL_OCI и пр.


14) Принцип работы dedicated-соединения и shared-соединения

- Dedicated: одно соединение клиента к одному серверному процессу; максимальная производительность и изоляция.

- Shared: несколько сессий делят один серверный процесс (multiprocessing); экономия памяти, худшая предсказуемость задержек.




15) Назначение файла LISTENER.ORA

- конфигурационный файл LISTENER; задаёт параметры LISTENER, адреса, порты, протоколы, параметры резерва; управляет доступом клиентов к БД.


16) Основные фоновые процессы и их назначение

- PMON: восстанавливает после сбоев, очищает ресурсы.

- SMON: инстанс-менеджер, реинстанцирует существующие транзакции при старте.

- DBWR: запись буферов в диск.

- LGWR: запись редо журналов.

- CKPT: контроль прогресса записи, обмен checkpoint.

- RECO: восстановление удалённых транзакций.

- ARCn (архиватор): архивирует online redo log.

- LCKn: локи/блокировки.

- DIAGNOSTIC/DIAG: сбор диагностики.

- MMAN/AMM: управление памятью (в зависимости от конфигурации).



17) Что такое серверный процесс? Как просмотреть серверные процессы?

- Серверный процесс (server process) — часть Oracle, которая выполняет запросы клиента; в процессорном режиме это отдельный процесс на ОС.

- Просмотреть серверные процессы:

  - В SQL*Plus: SELECT SPID, STATUS, PROGRAM FROM V$PROCESS;






